server.port=7001
spring.application.name=funaistudioworkspace

spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER

# Swagger UI ??
# Spring Boot 3 + springdoc 2.x ????? /swagger-ui/index.html
springdoc.swagger-ui.path=/swagger-ui
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.operationsSorter=method
# ?? Swagger UI
springdoc.swagger-ui.enabled=true
# ??????????
spring.web.resources.add-mappings=true
# ?? springdoc ????
springdoc.api-docs.enabled=true

# -----------------------------
# Workspace（用户在线开发容器）配置
# -----------------------------
# 是否启用 workspace 容器能力
funai.workspace.enabled=false
# workspace 宿主机持久化根目录（每用户：{root}/{userId}/apps/{appId}）
funai.workspace.hostRoot="D:\\dev\\AI\\fun-ai-studio-api-workspaces\\"
# workspace 容器镜像（建议使用你自己的 ACR 镜像，避免直连 docker hub）
funai.workspace.image=
# 容器内 dev server 端口（Vite 默认 5173）
funai.workspace.containerPort=5173
# 宿主机端口分配起始值（示例：20000+）
funai.workspace.hostPortBase=20000
# 单机最多尝试分配的端口数量（从 hostPortBase 开始向后扫描）
funai.workspace.hostPortScanSize=2000
# 容器内 workspace 目录（挂载点）
funai.workspace.containerWorkdir=/workspace
# 容器名模板：ws-u-{userId}
funai.workspace.containerNamePrefix=ws-u-
# podman/docker 网络名：用于让 workspace 容器访问同机其它服务容器（如 Verdaccio）
funai.workspace.networkName=funai-net
# npm registry（推荐同机 Verdaccio；仅容器网络访问）：http://verdaccio:4873
funai.workspace.npmRegistry=http://verdaccio:4873
# 出网代理（容器内使用；podman 下 host.containers.internal 通常可用）
funai.workspace.httpProxy=http://host.containers.internal:3128
funai.workspace.httpsProxy=http://host.containers.internal:3128
funai.workspace.noProxy=localhost,127.0.0.1,verdaccio,host.containers.internal
funai.workspace.idleStopRunMinutes=10
funai.workspace.idleStopContainerMinutes=20

# -----------------------------
# Workspace Mongo（可选）
# -----------------------------
funai.workspace.mongo.enabled=false
# Windows 本地可按需改为 D:\\...；生产建议 /data/funai/database
funai.workspace.mongo.hostRoot=/data/funai/database
funai.workspace.mongo.containerDbPath=/data/db
funai.workspace.mongo.containerLogDir=/var/log/mongodb
funai.workspace.mongo.bindIp=127.0.0.1
funai.workspace.mongo.port=27017
funai.workspace.mongo.dbNamePrefix=db_
funai.workspace.mongo.logFileName=mongod.log


# ????
logging.level.root=INFO

# -----------------------------
# workspace-node 内部鉴权（本地开发默认不限制；生产用 application-prod.properties）
# -----------------------------
workspace-node.internal.allowed-source-ip=
workspace-node.internal.shared-secret=ac462cfa76135504d2b750d541064ed5f03eb9f78f9068645995c4f825455f52
workspace-node.internal.require-signature=false

# -----------------------------
# workspace-node 节点注册/心跳上报（workspace 服务侧）
# -----------------------------
funai.workspace-node-registry-client.enabled=false
funai.workspace-node-registry-client.api-base-url=http://127.0.0.1:8080
funai.workspace-node-registry-client.node-name=ws-node-01
funai.workspace-node-registry-client.nginx-base-url=http://127.0.0.1
funai.workspace-node-registry-client.node-api-base-url=http://127.0.0.1:7001
# 与 API funai.workspace-node-registry.shared-secret 保持一致
funai.workspace-node-registry-client.token=4f2b1a9c8d3e7a60b1c9d7e5f3a8b6c4d2e0f9a7c5b3d1e8f6a4c2e9b7d5f0a1c3e8b2d6f9a0c4e7b1d5f8a2c6e9b3d7f0a4c8e1b5d9f2a6c0e3b7d1f4a8c2e5b9d0f3a7c1e4b8d2f5a9c3e6b0d4f7a1c5e8b2d6f9a0c4e7b1d5f8a2c6e9b3d7f0a4c8e1b5d9f2a6c0e3b7d1f4a8c2
funai.workspace-node-registry-client.interval-seconds=15
