server.port=8080
spring.application.name=funaistudioapi

# -----------------------------
# 默认开发环境：使用 H2 内存库，避免本机没有 MySQL 时启动失败
# 生产环境：使用 application-prod.properties 的 MySQL 配置
# -----------------------------
spring.datasource.url=jdbc:h2:mem:db_funaistudio;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# 若未来引入 JPA，可按需开启以下配置（目前工程未引入 spring-boot-starter-data-jpa，不影响启动）
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER

# Swagger UI ??
# Spring Boot 3 + springdoc 2.x ????? /swagger-ui/index.html
springdoc.swagger-ui.path=/swagger-ui
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.operationsSorter=method
# ?? Swagger UI
springdoc.swagger-ui.enabled=true
# ??????????
spring.web.resources.add-mappings=true
# ?? springdoc ????
springdoc.api-docs.enabled=true

# MyBatis-Plus ??
mybatis-plus.configuration.map-underscore-to-camel-case=true
mybatis-plus.global-config.db-config.id-type=auto

jwt.secret=funaistudio
#10?? ??24*7 168??36000*16.8
jwt.expiration=604800
# FunAI ????????????? appInfo ?? accessUrl?
funai.siteBaseUrl=http://172.17.5.80:8080
#?????
funai.siteLinkEnabled=false
funai.siteLinkRoot=/data/funai/sites

# -----------------------------
# Workspace（用户在线开发容器）配置（本地开发默认关闭；生产环境建议在 application-prod.properties 打开）
# -----------------------------
# 是否启用 workspace 容器能力
funai.workspace.enabled=false
# workspace 宿主机持久化根目录（每用户：{root}/{userId}/apps/{appId}）
funai.workspace.hostRoot="D:\\dev\\AI\\fun-ai-studio-api-workspaces\\"
# workspace 容器镜像（建议使用你自己的 ACR 镜像，避免直连 docker hub）
funai.workspace.image=
# 容器内 dev server 端口（Vite 默认 5173）
funai.workspace.containerPort=5173
# 宿主机端口分配起始值（示例：20000+）
funai.workspace.hostPortBase=20000
# 单机最多尝试分配的端口数量（从 hostPortBase 开始向后扫描）
funai.workspace.hostPortScanSize=2000
# 容器内 workspace 目录（挂载点）
funai.workspace.containerWorkdir=/workspace
# 容器名模板：ws-u-{userId}
funai.workspace.containerNamePrefix=ws-u-
# podman/docker 网络名：用于让 workspace 容器访问同机其它服务容器（如 Verdaccio）
funai.workspace.networkName=funai-net
# npm registry（推荐同机 Verdaccio；仅容器网络访问）：http://verdaccio:4873
funai.workspace.npmRegistry=http://verdaccio:4873
# 出网代理（容器内使用；podman 下 host.containers.internal 通常可用）
funai.workspace.httpProxy=http://host.containers.internal:3128
funai.workspace.httpsProxy=http://host.containers.internal:3128
funai.workspace.noProxy=localhost,127.0.0.1,verdaccio,host.containers.internal
funai.workspace.idleStopRunMinutes=10
funai.workspace.idleStopContainerMinutes=20

# -----------------------------
# Workspace Mongo（可选）
# -----------------------------
funai.workspace.mongo.enabled=false
# Windows 本地可按需改为 D:\\...；生产建议 /data/funai/database
funai.workspace.mongo.hostRoot=/data/funai/database
funai.workspace.mongo.containerDbPath=/data/db
funai.workspace.mongo.containerLogDir=/var/log/mongodb
funai.workspace.mongo.bindIp=127.0.0.1
funai.workspace.mongo.port=27017
funai.workspace.mongo.dbNamePrefix=db_
funai.workspace.mongo.logFileName=mongod.log


# ????
logging.level.root=INFO
